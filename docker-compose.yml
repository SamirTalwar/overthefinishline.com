version: '2'

services:
  dashboard-proxy:
    image: samirtalwar/overthefinishline.com-proxy
    environment:
      'SERVER_NAME': 'dev.overthefinishline.com'
      'BACKEND': 'dashboard'
    ports:
      - 80:80
      - 443:443
    depends_on:
      - dashboard

  dashboard:
    image: samirtalwar/overthefinishline.com-dashboard
    entrypoint:
      - '/usr/local/bin/overthefinishline-dashboard-exe'
    env_file: development.env
    environment:
      'ENVIRONMENT': 'Development'
      'CLIENT_PATH': '/client'
    ports:
      - 80
    depends_on:
      - database

  database:
    image: samirtalwar/overthefinishline.com-database
    ports:
      - 5432
    env_file: development.env
    volumes:
      - database-data:/var/lib/postgresql/data

volumes:
  database-data: {}
